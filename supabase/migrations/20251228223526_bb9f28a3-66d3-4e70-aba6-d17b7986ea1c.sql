-- First delete all data from tables (in correct order due to foreign keys)
DELETE FROM public.lesson_feedback;
DELETE FROM public.lesson_progress;
DELETE FROM public.lesson_credits;
DELETE FROM public.lessons;
DELETE FROM public.vehicles;
DELETE FROM public.push_subscriptions;
DELETE FROM public.impersonation_sessions;
DELETE FROM public.feature_flags;
DELETE FROM public.audit_logs;
DELETE FROM public.users;
DELETE FROM public.tenants;

-- Now insert fresh test data

-- 1. Create two test driving schools (tenants)
INSERT INTO public.tenants (id, name, primary_color, secondary_color, status, whatsapp_number, user_limit)
VALUES 
  ('11111111-0000-0000-0000-000000000001', 'Rijschool De Groot', '#3B82F6', '#10B981', 'active', '+31612345678', 50),
  ('11111111-0000-0000-0000-000000000002', 'Rijschool Van Dijk', '#8B5CF6', '#F59E0B', 'active', '+31698765432', 50);

-- 2. Create superadmin (no tenant)
INSERT INTO public.users (id, username, name, role, tenant_id, pincode, email)
VALUES ('00000000-0000-0000-0000-000000000001', 'superadmin', 'Super Administrator', 'superadmin', NULL, '0000', 'superadmin@rijplanner.nl');

-- 3. Create users for Rijschool De Groot
INSERT INTO public.users (id, username, name, role, tenant_id, pincode, email, phone, theory_passed)
VALUES 
  -- Admin
  ('11111111-1111-0000-0000-000000000001', 'admin1', 'Jan de Groot', 'admin', '11111111-0000-0000-0000-000000000001', '1234', 'jan@degroot.nl', '+31611111111', false),
  -- Instructor
  ('11111111-2222-0000-0000-000000000001', 'instructor1', 'Piet Bakker', 'instructor', '11111111-0000-0000-0000-000000000001', '1234', 'piet@degroot.nl', '+31622222222', false),
  -- Students
  ('11111111-3333-0000-0000-000000000001', 'student1', 'Emma Jansen', 'student', '11111111-0000-0000-0000-000000000001', '1234', 'emma@test.nl', '+31633333331', true),
  ('11111111-3333-0000-0000-000000000002', 'student2', 'Lucas van Berg', 'student', '11111111-0000-0000-0000-000000000001', '1234', 'lucas@test.nl', '+31633333332', false),
  ('11111111-3333-0000-0000-000000000003', 'student3', 'Sophie Visser', 'student', '11111111-0000-0000-0000-000000000001', '1234', 'sophie@test.nl', '+31633333333', true);

-- 4. Create users for Rijschool Van Dijk
INSERT INTO public.users (id, username, name, role, tenant_id, pincode, email, phone, theory_passed)
VALUES 
  -- Admin
  ('22222222-1111-0000-0000-000000000001', 'admin2', 'Kees van Dijk', 'admin', '11111111-0000-0000-0000-000000000002', '1234', 'kees@vandijk.nl', '+31644444444', false),
  -- Instructor
  ('22222222-2222-0000-0000-000000000001', 'instructor2', 'Maria Smit', 'instructor', '11111111-0000-0000-0000-000000000002', '1234', 'maria@vandijk.nl', '+31655555555', false),
  -- Students
  ('22222222-3333-0000-0000-000000000001', 'student4', 'Thomas de Vries', 'student', '11111111-0000-0000-0000-000000000002', '1234', 'thomas@test.nl', '+31666666661', false),
  ('22222222-3333-0000-0000-000000000002', 'student5', 'Lisa Mulder', 'student', '11111111-0000-0000-0000-000000000002', '1234', 'lisa@test.nl', '+31666666662', true);

-- 5. Create vehicles
INSERT INTO public.vehicles (id, brand, model, license_plate, instructor_id, tenant_id)
VALUES 
  ('11111111-4444-0000-0000-000000000001', 'Volkswagen', 'Polo', 'AB-123-CD', '11111111-2222-0000-0000-000000000001', '11111111-0000-0000-0000-000000000001'),
  ('11111111-4444-0000-0000-000000000002', 'Toyota', 'Yaris', 'EF-456-GH', '11111111-2222-0000-0000-000000000001', '11111111-0000-0000-0000-000000000001'),
  ('22222222-4444-0000-0000-000000000001', 'Ford', 'Fiesta', 'IJ-789-KL', '22222222-2222-0000-0000-000000000001', '11111111-0000-0000-0000-000000000002');

-- 6. Create lesson credits for students
INSERT INTO public.lesson_credits (id, student_id, tenant_id, total_credits, used_credits)
VALUES 
  ('11111111-5555-0000-0000-000000000001', '11111111-3333-0000-0000-000000000001', '11111111-0000-0000-0000-000000000001', 20, 5),
  ('11111111-5555-0000-0000-000000000002', '11111111-3333-0000-0000-000000000002', '11111111-0000-0000-0000-000000000001', 15, 2),
  ('11111111-5555-0000-0000-000000000003', '11111111-3333-0000-0000-000000000003', '11111111-0000-0000-0000-000000000001', 25, 10),
  ('22222222-5555-0000-0000-000000000001', '22222222-3333-0000-0000-000000000001', '11111111-0000-0000-0000-000000000002', 18, 3),
  ('22222222-5555-0000-0000-000000000002', '22222222-3333-0000-0000-000000000002', '11111111-0000-0000-0000-000000000002', 22, 8);

-- 7. Create lessons for Rijschool De Groot
INSERT INTO public.lessons (id, instructor_id, student_id, tenant_id, date, start_time, duration, status, remarks, vehicle_id)
VALUES 
  -- Completed lessons
  ('11111111-6666-0000-0000-000000000001', '11111111-2222-0000-0000-000000000001', '11111111-3333-0000-0000-000000000001', '11111111-0000-0000-0000-000000000001', '2025-12-20', '09:00:00', 60, 'completed', 'Eerste les - kennismaking', '11111111-4444-0000-0000-000000000001'),
  ('11111111-6666-0000-0000-000000000002', '11111111-2222-0000-0000-000000000001', '11111111-3333-0000-0000-000000000001', '11111111-0000-0000-0000-000000000001', '2025-12-22', '10:00:00', 90, 'completed', 'Schakelen en sturen', '11111111-4444-0000-0000-000000000001'),
  ('11111111-6666-0000-0000-000000000003', '11111111-2222-0000-0000-000000000001', '11111111-3333-0000-0000-000000000002', '11111111-0000-0000-0000-000000000001', '2025-12-21', '14:00:00', 60, 'completed', 'Rotondes', '11111111-4444-0000-0000-000000000002'),
  -- Accepted lessons
  ('11111111-6666-0000-0000-000000000004', '11111111-2222-0000-0000-000000000001', '11111111-3333-0000-0000-000000000001', '11111111-0000-0000-0000-000000000001', '2025-12-30', '09:00:00', 60, 'accepted', 'Snelweg rijden', '11111111-4444-0000-0000-000000000001'),
  ('11111111-6666-0000-0000-000000000005', '11111111-2222-0000-0000-000000000001', '11111111-3333-0000-0000-000000000003', '11111111-0000-0000-0000-000000000001', '2025-12-30', '11:00:00', 90, 'accepted', 'Examentraining', '11111111-4444-0000-0000-000000000002'),
  -- Pending lessons
  ('11111111-6666-0000-0000-000000000006', '11111111-2222-0000-0000-000000000001', '11111111-3333-0000-0000-000000000002', '11111111-0000-0000-0000-000000000001', '2025-12-31', '10:00:00', 60, 'pending', 'Parkeren', '11111111-4444-0000-0000-000000000001'),
  ('11111111-6666-0000-0000-000000000007', '11111111-2222-0000-0000-000000000001', '11111111-3333-0000-0000-000000000003', '11111111-0000-0000-0000-000000000001', '2026-01-02', '14:00:00', 120, 'pending', 'Praktijkexamen voorbereiding', '11111111-4444-0000-0000-000000000002');

-- 8. Create lessons for Rijschool Van Dijk
INSERT INTO public.lessons (id, instructor_id, student_id, tenant_id, date, start_time, duration, status, remarks, vehicle_id)
VALUES 
  ('22222222-6666-0000-0000-000000000001', '22222222-2222-0000-0000-000000000001', '22222222-3333-0000-0000-000000000001', '11111111-0000-0000-0000-000000000002', '2025-12-23', '09:30:00', 60, 'completed', 'Basis rijles', '22222222-4444-0000-0000-000000000001'),
  ('22222222-6666-0000-0000-000000000002', '22222222-2222-0000-0000-000000000001', '22222222-3333-0000-0000-000000000002', '11111111-0000-0000-0000-000000000002', '2025-12-24', '13:00:00', 90, 'completed', 'Stadsrijden', '22222222-4444-0000-0000-000000000001'),
  ('22222222-6666-0000-0000-000000000003', '22222222-2222-0000-0000-000000000001', '22222222-3333-0000-0000-000000000001', '11111111-0000-0000-0000-000000000002', '2025-12-30', '10:00:00', 60, 'accepted', 'Fietsersveiligheid', '22222222-4444-0000-0000-000000000001'),
  ('22222222-6666-0000-0000-000000000004', '22222222-2222-0000-0000-000000000001', '22222222-3333-0000-0000-000000000002', '11111111-0000-0000-0000-000000000002', '2026-01-03', '15:00:00', 90, 'pending', 'Nachtrijden', '22222222-4444-0000-0000-000000000001');

-- 9. Create feedback for completed lessons
INSERT INTO public.lesson_feedback (id, lesson_id, instructor_id, student_id, tenant_id, rating, notes, topics_practiced)
VALUES 
  ('11111111-7777-0000-0000-000000000001', '11111111-6666-0000-0000-000000000001', '11111111-2222-0000-0000-000000000001', '11111111-3333-0000-0000-000000000001', '11111111-0000-0000-0000-000000000001', 4, 'Goede eerste les! Snelle leerling.', ARRAY['Kennismaking', 'Koppeling', 'Gas geven']),
  ('11111111-7777-0000-0000-000000000002', '11111111-6666-0000-0000-000000000002', '11111111-2222-0000-0000-000000000001', '11111111-3333-0000-0000-000000000001', '11111111-0000-0000-0000-000000000001', 5, 'Uitstekend! Schakelen gaat nu vloeiend.', ARRAY['Schakelen', 'Sturen', 'Spiegels']),
  ('11111111-7777-0000-0000-000000000003', '11111111-6666-0000-0000-000000000003', '11111111-2222-0000-0000-000000000001', '11111111-3333-0000-0000-000000000002', '11111111-0000-0000-0000-000000000001', 3, 'Rotondes zijn nog lastig, volgende keer meer oefenen.', ARRAY['Rotondes', 'Voorrang', 'Kijkgedrag']),
  ('22222222-7777-0000-0000-000000000001', '22222222-6666-0000-0000-000000000001', '22222222-2222-0000-0000-000000000001', '22222222-3333-0000-0000-000000000001', '11111111-0000-0000-0000-000000000002', 4, 'Prima start, goed gevoel voor de auto.', ARRAY['Kennismaking', 'Basis bediening']),
  ('22222222-7777-0000-0000-000000000002', '22222222-6666-0000-0000-000000000002', '22222222-2222-0000-0000-000000000001', '22222222-3333-0000-0000-000000000002', '11111111-0000-0000-0000-000000000002', 5, 'Super gedaan in het drukke verkeer!', ARRAY['Stadsrijden', 'Verkeerslichten', 'Fietsers']);